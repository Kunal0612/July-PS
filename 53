// https://codeforces.com/contest/1956/problem/E2

#include <iostream>
#include <vector>
#include <algorithm>
#include <random>
#include <ctime>
#include <functional>
#include <cassert>
#include <stdexcept>


bool Check(int len, std::vector<int>& arr) {
    arr[len + 1] = arr[1];
    arr[len + 2] = arr[2];
    arr[len + 3] = arr[3];
    for (int i = 1; i <= len; i++) {
        if (arr[i] and arr[i + 1] and arr[i + 2] and arr[i + 3]){
            return true;
        }
    }
    return false;
}

long long Attack(long long first, long long sec) {
    long long k_value = first / sec;
    return (2 * first - (k_value + 1) * sec) * k_value / 2;
}

std::vector<int> NeneVsMonsters(std::vector<int> &nums) {
    int len=nums.size();
    if (len <= 1 or len > 200000)
    {
        throw std::invalid_argument("Invalid nums length");
    }
    for (int i = 0; i < len; i++)
    {
        if (nums[i] < 0 or nums[i] > 1000000000)
        {
            throw std::invalid_argument("Invalid nums");
        }
    }
    std::vector<int> arr(len + 4, 0);
    std::vector<bool> brr(len + 1, false);
    
    for (int i = 1; i <= len; i++) {
        arr[i]=nums[i-1];
    }

    if (len == 2) {
        while (arr[1] && arr[2]) {
            arr[2] = std::max(0, arr[2] - arr[1]);
            arr[1] = std::max(0, arr[1] - arr[2]);
        }
        brr[1] = (arr[1] > 0);
        brr[2] = (arr[2] > 0);
    } 
    else if (len == 3) {
        while (arr[1] && arr[2] && arr[3]) {
            arr[2] = std::max(0, arr[2] - arr[1]);
            arr[3] = std::max(0, arr[3] - arr[2]);
            arr[1] = std::max(0, arr[1] - arr[3]);
        }
        brr[1] = (!arr[3] && arr[1]);
        brr[2] = (!arr[1] && arr[2]);
        brr[3] = (!arr[2] && arr[3]);
    } else {
        while (Check(len, arr)) {
            for (int i = 1; i <= len; i++) {
                arr[i % len + 1] = std::max(0, arr[i % len + 1] - arr[i]);
            }
        }

        for (int i = 1; i <= len; i++) brr[i] = false;

        for (int p = 1; p <= len; p++) {
            if (arr[p] && arr[p % len + 1]) {
                arr[p % len + 1] = std::max(0, arr[p % len + 1] - arr[p]);
            } else {
                break;
            }
        }

        for (int i = 1; i <= len; i++) {
            if (!arr[i] && arr[i % len + 1]) {
                brr[i % len + 1] = true;
                brr[(i + 2) % len + 1] = (arr[(i + 2) % len + 1] > Attack(arr[(i + 1) % len + 1], arr[i % len + 1]));
            }
        }
    }
    std::vector<int> ans;
    for (int i = 1; i <= len; i++) {
        if (brr[i]){
            ans.push_back(i);
        }
    };
    return ans;
}

#include <iostream>
#include <vector>
#include <algorithm>
#include <random>
#include <ctime>
#include <functional>
#include <cassert>
#include <stdexcept>


int main() {
    
    
    std::cout << "All test cases passed!\n";
    return 0;
}
